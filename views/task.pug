- var staleClass = task.rollovers >= 5 ? 'task-stale-3' : task.rollovers >= 3 ? 'task-stale-2' : task.rollovers >= 1 ? 'task-stale-1' : ''
- var recurringClass = task.generatedFrom ? 'task-recurring' : ''
.task-item.d-flex.align-items-center(data-id=task._id data-position=task.position class=`${staleClass} ${recurringClass}`)
	form.me-3(method="POST" action=`/tasks/${task._id}/complete`)
		button.btn.btn-outline-success(type="submit" title="Complete") ‚úì
	.flex-grow-1
		.task-title
			if task.url
				a.task-link(href=task.url target="_blank" rel="noopener")= task.title
			else
				span= task.title
			if task.generatedFrom
				span.task-source-indicator ‚Üª
			if task.url
				span.task-url-indicator üîó
		if task.description
			.task-description= task.description
		if task.rollovers > 0
			.stale-indicator
				span ‚è±
				span Deferred #{task.rollovers}√ó
	.task-actions.ms-3
		.dropdown
			button.dropdown-toggle(type="button" data-bs-toggle="dropdown" aria-expanded="false") ‚Ä¢‚Ä¢‚Ä¢
			ul.dropdown-menu.dropdown-menu-end
				li
					a.dropdown-item(href=`/tasks/${task._id}/edit`) Edit Task
				if task.generatedFrom
					li
						a.dropdown-item(href=`/recurring/${task.generatedFrom}/edit`) Edit Recurring
				li
					hr.dropdown-divider
				li
					form(method="POST" action=`/tasks/${task._id}/move-up`)
						button.dropdown-item(type="submit") Move Up
				li
					form(method="POST" action=`/tasks/${task._id}/move-down`)
						button.dropdown-item(type="submit") Move Down
				li
					hr.dropdown-divider
				li
					form(method="POST" action=`/tasks/${task._id}/today`)
						button.dropdown-item(type="submit") Move to Today
				li
					form(method="POST" action=`/tasks/${task._id}/tomorrow`)
						button.dropdown-item(type="submit") Defer to Tomorrow
				li
					form(method="POST" action=`/tasks/${task._id}/scratch`)
						button.dropdown-item(type="submit") Send to Scratch Pad
				li
					hr.dropdown-divider
				li
					form(method="POST" action=`/tasks/${task._id}/archive`)
						button.dropdown-item.text-danger(type="submit") Archive
