extends layout

block content
	main.container.py-4
		.row.justify-content-center
			.col-12.col-lg-10.col-xl-8
				a.nav-link-secondary.mb-3(href="/")
					span ‚Üê
					| Back to Today

				.card
					.card-body
						h4.mb-4 Edit Task

						form(method="POST" action=`/tasks/${task._id}/edit`)
							.mb-3
								label.form-label(for="title") Title
								input.form-control#title(type="text" name="title" value=task.title required)

							.mb-3
								label.form-label(for="description") Description
								textarea.form-control#description(name="description" rows="3" placeholder="Optional notes...")= task.description

							.mb-3
								label.form-label(for="url") Quick Action URL
								input.form-control#url(type="url" name="url" value=task.url placeholder="https://...")
								.form-text Clicking the task will open this URL

							.mb-4
								label.form-label(for="scheduledFor") Scheduled For
								- var dateValue = task.scheduledFor ? task.scheduledFor.toLocaleDateString('en-CA', { timeZone: 'America/Los_Angeles' }) : ''
								input.form-control.w-auto#scheduledFor(type="date" name="scheduledFor" value=dateValue)
								.form-text Leave blank for scratch pad

							.d-flex.gap-2
								button.btn.btn-primary(type="submit") Save Changes
								a.btn.btn-outline-secondary(href="/") Cancel

				.card.mt-3
					.card-body
						.d-flex.gap-2.justify-content-between
							form(method="POST" action=`/tasks/${task._id}/complete`)
								button.btn.btn-success(type="submit") Mark Complete
							form(method="POST" action=`/tasks/${task._id}/archive` onsubmit="return confirm('Archive this task?')")
								button.btn.btn-outline-danger(type="submit") Archive
