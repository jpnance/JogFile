extends layout

block content
	main.container.py-4
		.row.justify-content-center
			.col-12.col-lg-10.col-xl-8
				a.nav-link-secondary.mb-3(href="/")
					span ‚Üê
					| Back to Today

				.page-header
					h1 Birthdays
					a.btn.btn-birthday.btn-sm(href="/birthdays/new") + New

				if totalCount === 0
					.empty-state
						.empty-state-icon üéÇ
						p No birthdays yet
						a.btn.btn-birthday(href="/birthdays/new") Add your first
				else
					each group in byMonth
						.mb-3
							.section-header.birthday-section-header(data-bs-toggle="collapse" data-bs-target=`#month-${group.month}` aria-expanded="true")
								span.chevron ‚ñ∂
								span.section-title= group.name
								span.section-count= group.people.length
							.collapse.show(id=`month-${group.month}`)
								.pt-2
									each person in group.people
										.birthday-item
											.birthday-item-content
												.birthday-name= person.name
												.birthday-date
													= person.getBirthdayString()
													if person.birthYear
														|  
														- var nextBirthday = person.getNextBirthday()
														- var turningAge = person.getTurningAge(nextBirthday)
														span.birthday-age (turning #{turningAge})
												if person.notes
													.text-muted.small.mt-1= person.notes
											.birthday-item-actions
												a.btn.btn-sm.btn-outline-secondary(href=`/birthdays/${person._id}/edit`) Edit
												form(method="POST" action=`/birthdays/${person._id}/delete` onsubmit="return confirm('Remove this birthday?')")
													button.btn.btn-sm.btn-outline-danger(type="submit") Delete
