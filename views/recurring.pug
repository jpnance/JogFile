extends layout

block content
	main.container.py-4
		.row.justify-content-center
			.col-12.col-lg-10.col-xl-8
				a.nav-link-secondary.mb-3(href="/")
					span ←
					| Back to Today

				.page-header
					h1 Recurring
					a.btn.btn-primary(href="/recurring/new") + New

				if recurring.length === 0
					.empty-state
						.empty-state-icon ↻
						p No recurring tasks yet
						a.btn.btn-primary(href="/recurring/new") Create your first
				else
					each rec in recurring
						.recurring-item
							.d-flex.justify-content-between.align-items-start
								div
									.recurring-title= rec.title
									.recurring-pattern= rec.getPatternDescription()
									if rec.description
										.text-muted.small.mt-1= rec.description
									.mt-2
										if !rec.isActive
											span.badge.bg-secondary Inactive
										if rec.pausedUntil
											span.badge.bg-warning Paused until #{rec.pausedUntil.toLocaleDateString()}
								.d-flex.gap-2
									a.btn.btn-sm.btn-outline-secondary(href=`/recurring/${rec._id}/edit`) Edit
									if rec.pausedUntil
										form(method="POST" action=`/recurring/${rec._id}/resume`)
											button.btn.btn-sm.btn-outline-secondary(type="submit") Resume
									form(method="POST" action=`/recurring/${rec._id}/delete` onsubmit="return confirm('Delete this recurring task?')")
										button.btn.btn-sm.btn-outline-danger(type="submit") Delete
